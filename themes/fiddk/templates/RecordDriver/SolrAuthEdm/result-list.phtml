<?php
  $heading = $this->driver->getTitle();
  if (empty($heading)) {
    $heading = $this->translate('Heading unavailable.');
  }
  $coverDetails = $this->record($this->driver)->getCoverDetails('result-list', 'medium', $this->recordLink()->getUrl($this->driver));
  $cover = $coverDetails['html'];
  $thumbnail = false;
  $thumbnailAlignment = $this->record($this->driver)->getThumbnailAlignment('result');
  if ($cover):
    ob_start(); ?>
    <div class="media-<?=$thumbnailAlignment ?> <?=$this->escapeHtmlAttr($coverDetails['size'])?>">
      <?=$cover ?>
    </div>
  <?php $thumbnail = ob_get_contents();
  ob_end_clean();

  $prof = $this->driver->getOccupation();

?>
<div class="media">

<?php endif; ?>
  <?php if ($thumbnail): ?>
    <?=$thumbnail ?>
  <?php endif ?>
  <div class="media-body">
    <div class="resultItemLine1">
      <a href="<?=$this->url('authority-record')?>?id=<?=urlencode($this->driver->getUniqueId())?>" class="title"><?=$this->escapeHtml($heading)?></a>
    </div>

    <? /* <div class="resultItemLine2">
      <? if ($establishment or $termination) : ?>
            <? if (!$termination) : ?>
               <?=$this->transEsc('since') . ' ' . $establishment?><br/>
            <? elseif(!$establishment) : ?>
               <?=$this->transEsc('until') . ' ' . $establishment?><br/>
            <? else : ?>
               <?=$establishment . ' - ' . $termination?><br/>
          <? endif; ?>
      <? endif; ?>
      <? if ($birthDate or $deathDate) : ?>
            <? if (!$deathDate) : ?>
               <?='* ' . $birthDate?><br/>
            <? elseif(!$birthDate) : ?>
               <?='† ' . $deathDate?><br/>
            <? else : ?>
               <?='* ' . $birthDate . ' - † ' . $deathDate?><br/>
          <? endif; ?>
      <? endif; ?>
      <? if ($topic) : ?>
            <?=implode($topic,', ');?><br/>
          <? endif; ?>
    </div> */ ?>

    <div class="resultItemLine2">
      <?php if (!empty($prof)): ?>
        <?php foreach ($prof as $current): ?>
          <a href="<?=$this->url('authority-search')?>?filter[]=occupation_facet%3A<?=urlencode($current)?>"><?=$this->escapeHtml($current)?></a> |
        <?php endforeach; ?>
      <?php endif; ?>
    </div>

  </div>
</div>
